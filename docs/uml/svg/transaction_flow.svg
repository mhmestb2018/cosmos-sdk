<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1089" height="586" contentScriptType="application/ecmascript" contentStyleType="text/css" style="width:1089px;height:586px" preserveAspectRatio="none" version="1.1" viewBox="0 0 1089 586" zoomAndPan="magnify"><defs><filter id="f1fk3fcjhssuz0" width="300%" height="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect style="stroke:#000;stroke-width:2" width="397" height="46.266" x="392" y="250.961" fill="#FFF" filter="url(#f1fk3fcjhssuz0)"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="23" x2="23" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="194.5" x2="194.5" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="360" x2="360" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="438" x2="438" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="591.5" x2="591.5" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="849" x2="849" y1="88.297" y2="502.023"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:5,5" x1="986" x2="986" y1="88.297" y2="502.023"/><text x="5" y="84.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31">User</text><ellipse cx="23.5" cy="15" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)" rx="8" ry="8" style="stroke:#a80036;stroke-width:2"/><path fill="none" d="M23.5,23 L23.5,50 M10.5,31 L36.5,31 M23.5,50 L10.5,65 M23.5,50 L36.5,65" filter="url(#f1fk3fcjhssuz0)" style="stroke:#a80036;stroke-width:2"/><text x="5" y="514.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31">User</text><ellipse cx="23.5" cy="527.32" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)" rx="8" ry="8" style="stroke:#a80036;stroke-width:2"/><path fill="none" d="M23.5,535.3203 L23.5,562.3203 M10.5,543.3203 L36.5,543.3203 M23.5,562.3203 L10.5,577.3203 M23.5,562.3203 L36.5,577.3203" filter="url(#f1fk3fcjhssuz0)" style="stroke:#a80036;stroke-width:2"/><rect style="stroke:#a80036;stroke-width:1.5" width="78" height="30.297" x="153.5" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="160.5" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64">baseApp</text><rect style="stroke:#a80036;stroke-width:1.5" width="78" height="30.297" x="153.5" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="160.5" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64">baseApp</text><rect style="stroke:#a80036;stroke-width:1.5" width="59" height="30.297" x="329" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="336" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45">router</text><rect style="stroke:#a80036;stroke-width:1.5" width="59" height="30.297" x="329" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="336" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45">router</text><rect style="stroke:#a80036;stroke-width:1.5" width="68" height="30.297" x="402" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="409" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54">handler</text><rect style="stroke:#a80036;stroke-width:1.5" width="68" height="30.297" x="402" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="409" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54">handler</text><rect style="stroke:#a80036;stroke-width:1.5" width="91" height="30.297" x="544.5" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="551.5" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77">msgServer</text><rect style="stroke:#a80036;stroke-width:1.5" width="91" height="30.297" x="544.5" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="551.5" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77">msgServer</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="30.297" x="814" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="821" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52">keeper</text><rect style="stroke:#a80036;stroke-width:1.5" width="66" height="30.297" x="814" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="821" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="52">keeper</text><rect style="stroke:#a80036;stroke-width:1.5" width="181" height="30.297" x="894" y="53" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="901" y="72.995" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167">Context.EventManager</text><rect style="stroke:#a80036;stroke-width:1.5" width="181" height="30.297" x="894" y="501.023" fill="#FEFECE" filter="url(#f1fk3fcjhssuz0)"/><text x="901" y="521.019" fill="#000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="167">Context.EventManager</text><polygon fill="#A80036" points="182.5 115.43 192.5 119.43 182.5 123.43 186.5 119.43" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="23.5" x2="188.5" y1="119.43" y2="119.43"/><text x="30.5" y="114.364" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147">Transaction Type&lt;Tx&gt;</text><polygon fill="#A80036" points="348.5 144.563 358.5 148.563 348.5 152.563 352.5 148.563" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="194.5" x2="354.5" y1="148.563" y2="148.563"/><text x="201.5" y="143.497" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142">Route(ctx, msgRoute)</text><polygon fill="#A80036" points="205.5 173.695 195.5 177.695 205.5 181.695 201.5 177.695" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="199.5" x2="359.5" y1="177.695" y2="177.695"/><text x="211.5" y="172.629" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48">handler</text><polygon fill="#A80036" points="426 202.828 436 206.828 426 210.828 430 206.828" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="194.5" x2="432" y1="206.828" y2="206.828"/><text x="201.5" y="201.762" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177">Msg&lt;Tx&gt;(Context, Msg(...))</text><polygon fill="#A80036" points="580 231.961 590 235.961 580 239.961 584 235.961" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="438" x2="586" y1="235.961" y2="235.961"/><text x="445" y="230.895" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130">&lt;Tx&gt;(Context, Msg)</text><path fill="#EEE" d="M392,250.9609 L458,250.9609 L458,257.9609 L448,267.9609 L392,267.9609 L392,250.9609" style="stroke:#000;stroke-width:1"/><rect style="stroke:#000;stroke-width:2" width="397" height="46.266" x="392" y="250.961" fill="none"/><text x="407" y="264.028" fill="#000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21">alt</text><text x="473" y="263.171" fill="#000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="311">[addresses invalid, denominations wrong, etc.]</text><polygon fill="#A80036" points="449 285.227 439 289.227 449 293.227 445 289.227" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="443" x2="591" y1="289.227" y2="289.227"/><text x="455" y="284.161" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31">error</text><polygon fill="#A80036" points="837 321.359 847 325.359 837 329.359 841 325.359" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="592" x2="843" y1="325.359" y2="325.359"/><text x="599" y="320.293" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201">perform action, update context</text><polygon fill="#A80036" points="603 350.492 593 354.492 603 358.492 599 354.492" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="597" x2="848" y1="354.492" y2="354.492"/><text x="609" y="349.426" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117">results, error code</text><polygon fill="#A80036" points="974.5 379.625 984.5 383.625 974.5 387.625 978.5 383.625" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1" x1="592" x2="980.5" y1="383.625" y2="383.625"/><text x="599" y="378.559" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134">Emit relevant events</text><line style="stroke:#a80036;stroke-width:1" x1="592" x2="634" y1="412.758" y2="412.758"/><line style="stroke:#a80036;stroke-width:1" x1="634" x2="634" y1="412.758" y2="425.758"/><line style="stroke:#a80036;stroke-width:1" x1="593" x2="634" y1="425.758" y2="425.758"/><polygon fill="#A80036" points="603 421.758 593 425.758 603 429.758 599 425.758" style="stroke:#a80036;stroke-width:1"/><text x="599" y="407.692" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243">maybe wrap results in more structure</text><polygon fill="#A80036" points="449 450.891 439 454.891 449 458.891 445 454.891" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="443" x2="591" y1="454.891" y2="454.891"/><text x="455" y="449.825" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110">result, error code</text><polygon fill="#A80036" points="205.5 480.023 195.5 484.023 205.5 488.023 201.5 484.023" style="stroke:#a80036;stroke-width:1"/><line style="stroke:#a80036;stroke-width:1;stroke-dasharray:2,2" x1="199.5" x2="437" y1="484.023" y2="484.023"/><text x="211.5" y="478.957" fill="#000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117">results, error code</text></g></svg>